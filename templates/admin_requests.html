{% extends "base.html" %}

{% block title %}Richieste VM{% endblock %}

{% block content %}

<h2>Richieste in attesa</h2>

{% if richieste|length == 0 %}
    <p>Nessuna richiesta presente.</p>
{% else %}
<table border="1" cellspacing="0" cellpadding="8">
    <tr>
        <th>ID</th>
        <th>Utente</th>
        <th>Tipo VM</th>
        <th>Status</th>
        <th>Data richiesta</th>
        <th>Azioni</th>
    </tr>

    {% for r in richieste %}
    <tr>
        <td>{{ r[0] }}</td>   
        <td>{{ r[1] }}</td>   
        <td>{{ r[2] }}</td>   
        <td>{{ r[3] }}</td>   
        <td>{{ r[4] }}</td>   
        <td>
            <form method="post" action="{{ url_for('admin.approve_request', request_id=r[0]) }}" style="display:inline">
                <button type="submit">Approve</button>
            </form>
            <form method="post" action="{{ url_for('admin.reject_request', request_id=r[0]) }}" style="display:inline" onsubmit="return confirm('Confermi rifiuto?');">
                <button type="submit">Reject</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endif %}

{% endblock %}